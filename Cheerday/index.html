<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <meta name="referrer" content="no-referrer" />
  <title>Glamorous Cheer – Registration</title>
  <style>
    :root{
      --blue-1:#201B59; --blue-2:#2E2A78; --plum-2:#3A1F5C;
      --logo-w: clamp(120px, 28vw, 220px);
    }
    *,*::before,*::after{ box-sizing:border-box; }
    html,body{ margin:0; overflow-x:hidden; color:#fff;
      font-family: system-ui, -apple-system, "Segoe UI", Roboto, sans-serif;
      background: linear-gradient(180deg, var(--blue-1), var(--blue-2) 60%, var(--plum-2));
      -webkit-text-size-adjust:100%;
    }
    .container{ width:min(100%,1080px); margin:16px auto; padding:0 12px; }
    .card{ border-radius:24px; overflow:hidden;
      box-shadow:0 20px 50px rgba(0,0,0,.45);
      background: linear-gradient(160deg,#14143a 0%,#22236b 55%,#2f2a7a 100%);
    }

    /* ====== HEADER บาง ๆ (มีแค่โลโก้ + ข้อความ) ====== */
    .head{ padding:14px 14px 8px; text-align:center; }
    .logo{ width:var(--logo-w); height:auto; display:block; margin:0 auto; }

    .title{ margin:6px 0 4px; font-weight:800; letter-spacing:.3px; }
    .sub{ margin:0 8px 12px; opacity:.95; line-height:1.35; }

    /* ====== พื้นที่ฟอร์ม (สูงพอดีจอแบบง่าย ๆ) ====== */
    .wrap{
      position:relative; width:100%;
      background:#fff; border-top:1px solid rgba(255,255,255,.15); border-bottom:1px solid rgba(255,255,255,.1);
      /* สูง = สูงหน้าต่าง − ส่วนหัว − margin เฉลี่ยเล็กน้อย */
      height: calc(100svh - var(--head-h, 220px) - 16px);
      min-height: 600px;  /* กันจอเตี้ยมาก */
      overflow:visible;
    }
    iframe{ position:absolute; inset:0; width:100%; height:100%; border:0; background:#fff; }

    /* ปุ่มเปิดฟอร์มเต็มหน้า (ใช้เฉพาะ iOS in-app) */
    .openfull{ display:none; text-align:center; padding:28px 16px; }
    .btn{
      appearance:none; border:0; cursor:pointer; border-radius:999px;
      padding:10px 16px; font-weight:800; color:#321a05;
      background: linear-gradient(90deg,#8A5E1E,#E6BE72,#D4A84A,#8A5E1E);
      box-shadow:0 8px 18px rgba(0,0,0,.25);
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="card">
      <header class="head" id="head">
        <!-- ถ้า “โลโก้ทำให้เป็น” แล้ว ไม่ต้องแก้อะไร แค่เปลี่ยนไฟล์ cheer.png -->
        <img src="cheer.png" alt="Glamorous Cheer" class="logo">
        <h1 class="title">Own the Stage ✨</h1>
        <p class="sub">
          Bangkok University<br>
          22 ตุลาคม 2568<br>
          16:00–21:30
        </p>
      </header>

      <!-- ฝังฟอร์ม (จะถูกซ่อนใน iOS in-app) -->
      <div class="wrap" id="wrap">
        <iframe
          id="gform"
          src="https://docs.google.com/forms/d/e/1FAIpQLScKd0s0ACS0ThMMDJKYJl-B2L3r_xYRJ2ltRS5Ie0RaU6UaPw/viewform?embedded=true"
          loading="lazy" allowfullscreen referrerpolicy="no-referrer-when-downgrade"></iframe>
      </div>

      <!-- ปุ่มเปิดฟอร์มเต็มหน้า (แสดงเฉพาะ iOS in-app) -->
      <div class="openfull" id="openfull">
        <p style="margin:0 0 10px">เบราว์เซอร์นี้ไม่รองรับการฝังฟอร์ม</p>
        <button class="btn" id="openBtn">เปิดฟอร์มแบบเต็มหน้า</button>
      </div>
    </div>
  </div>

  <script>
    // ตั้งตัวแปรความสูงส่วนหัวให้ CSS ใช้คำนวณ wrap
    (function(){
      const head = document.getElementById('head');
      if (head) {
        const h = Math.round(head.getBoundingClientRect().height);
        document.documentElement.style.setProperty('--head-h', h + 'px');
        window.addEventListener('orientationchange', ()=> {
          setTimeout(()=> {
            const hh = Math.round(head.getBoundingClientRect().height);
            document.documentElement.style.setProperty('--head-h', hh + 'px');
          }, 180);
        });
      }
    })();

    // ล้างพารามิเตอร์ติดตาม (fbclid/gclid/utm) ให้ URL สะอาด
    (function(){
      const url = new URL(location.href); const p = url.searchParams; let dirty=false;
      [...p.keys()].forEach(k=>{ if(k==='fbclid'||k==='gclid'||k.startsWith('utm_')){ p.delete(k); dirty=true; }});
      if(dirty) history.replaceState({}, document.title, url.pathname + (p.toString()?('?'+p.toString()):''));
    })();

    // ถ้าเป็น iOS + เปิดผ่าน in-app (Instagram/FB/LINE/Twitter/WebView) → ซ่อน iframe แล้วโชว์ปุ่ม
    (function(){
      const ua = navigator.userAgent || '';
      const isIOS = /iPad|iPhone|iPod/.test(ua);
      const isInApp = /(FBAN|FBAV|Instagram|Line|Twitter|WebView|wv)/i.test(ua);
      if (isIOS && isInApp){
        document.getElementById('wrap').style.display = 'none';
        document.getElementById('openfull').style.display = 'block';
        document.getElementById('openBtn').addEventListener('click', ()=>{
          window.open(
            'https://docs.google.com/forms/d/e/1FAIpQLScKd0s0ACS0ThMMDJKYJl-B2L3r_xYRJ2ltRS5Ie0RaU6UaPw/viewform',
            '_blank','noopener,noreferrer'
          );
        });
      }
    })();
  </script>
</body>
</html>
